`timescale 1ns / 1ps

module BancoRegistro #(      		 //   #( Parametros
			//parameter MEMORYREG ="./reg16.men",
         parameter BIT_ADDR = 3,  //   BIT_ADDR Número de bit para la dirección
         parameter BIT_DATO = 4,
         parameter MEMORYREG ="C:/Users/andre/Documents/GitHub/lab04-2021-1-grupo-6/Laboratorio/reg16.men"
         
	)
	(
    input [BIT_ADDR-1:0] addrRa,
    input [BIT_ADDR-1:0] addrRb,
    input [BIT_ADDR-1:0] addrW,
    input [BIT_DATO-1:0] datW,
    input RegWrite,
    input clk,
    input rst,
    output [BIT_DATO-1:0] datOutRa,
    output [BIT_DATO-1:0] datOutRb);

// La cantdiad de registros es igual a: 
localparam NREG = 2 ** BIT_ADDR;
localparam datRST= 5;
  
//configiración del banco de registro 
reg [BIT_DATO-1: 0] breg [NREG-1:0];

assign  datOutRa = breg[addrRa];
assign  datOutRb = breg[addrRb];

reg [BIT_ADDR: 0] i;
wire enable;
reg [26:0] cfreq=0;

assign enable = cfreq[16];
always @(posedge clk) begin
		cfreq<=cfreq+1;
end
//cambiar clk a enable para implementacion en fpga
always @(posedge clk) begin
	if (rst == 0)
    for(i=0;i<NREG;i=i+1)begin
     breg[i] <= datRST; 
    end 
    else if (RegWrite == 0)
     breg[addrW] <= datW;
  end

initial begin  
   $readmemh(MEMORYREG, breg);
end   


endmodule

